<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f172a" />
    <title>TopTrend 热榜追踪</title>
    <link rel="icon" type="image/x-icon" href="./assets/icon/favicon.ico" />
    <link rel="icon" type="image/png" sizes="192x192" href="./assets/icon/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="./assets/icon/icon-512.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/icon/apple-touch-icon.png" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body class="bg-slate-50 text-slate-900">
    <main class="mx-auto max-w-6xl px-4 py-6">
      <header class="mb-6 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <h1 class="text-2xl font-bold">TopTrend 热榜追踪</h1>
          <select id="sourceSelect" class="min-w-28 rounded border px-2 py-1 text-sm">
            <option value="weibo">微博热搜</option>
          </select>
        </div>
        <div id="lastUpdated" class="text-sm text-slate-500">更新时间: -</div>
      </header>
      <div
        id="statusBanner"
        class="mb-4 hidden rounded-lg border border-amber-300 bg-amber-50 px-4 py-3 text-sm text-amber-800"
      ></div>

      <nav class="mb-4 flex gap-2">
        <button class="tab-btn tab-active" data-tab="realtime">实时榜单</button>
        <button class="tab-btn" data-tab="history">历史榜单</button>
        <button class="tab-btn" data-tab="library">词条库</button>
        <button class="tab-btn" data-tab="trend">趋势分析</button>
      </nav>

      <section id="tab-realtime" class="tab-panel rounded-xl bg-white p-4 shadow">
        <h2 class="mb-3 text-lg font-semibold">最新榜单</h2>
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b text-left text-slate-500">
                <th class="py-2">排名</th>
                <th class="py-2">标题</th>
                <th class="py-2">变化</th>
                <th class="py-2">热度</th>
                <th class="py-2">操作</th>
              </tr>
            </thead>
            <tbody id="realtimeTable"></tbody>
          </table>
        </div>
      </section>

      <section id="tab-history" class="tab-panel hidden rounded-xl bg-white p-4 shadow">
        <h2 class="mb-3 text-lg font-semibold">历史榜单</h2>
        <div class="mb-3 flex gap-2">
          <select id="dateSelect" class="rounded border px-3 py-2"></select>
          <select id="snapshotSelect" class="rounded border px-3 py-2"></select>
        </div>
        <ul id="historyList" class="space-y-2"></ul>
      </section>

      <section id="tab-trend" class="tab-panel hidden rounded-xl bg-white p-4 shadow">
        <h2 class="mb-3 text-lg font-semibold">条目趋势</h2>
        <div class="mb-4 flex gap-2">
          <input
            id="keywordInput"
            class="w-72 rounded border px-3 py-2"
            placeholder="输入关键词后回车"
          />
          <button id="keywordBtn" class="rounded bg-blue-600 px-4 py-2 text-white">分析</button>
        </div>
        <div id="recentKeywords" class="mb-4 flex flex-wrap items-center gap-2"></div>
        <div id="trendStats" class="mb-4 grid grid-cols-2 gap-3 md:grid-cols-4"></div>
        <div id="rankChart" class="h-80"></div>
      </section>

      <section id="tab-library" class="tab-panel hidden rounded-xl bg-white p-4 shadow">
        <h2 class="mb-3 text-lg font-semibold">全词条库</h2>
        <div class="mb-3 flex flex-wrap gap-2">
          <input id="librarySearch" class="w-72 rounded border px-3 py-2" placeholder="搜索词条" />
          <select id="libraryStatus" class="rounded border px-3 py-2">
            <option value="all">全部状态</option>
            <option value="on_list">在榜中</option>
            <option value="off_list">已掉榜</option>
            <option value="comeback">曾回榜</option>
          </select>
          <select id="librarySort" class="rounded border px-3 py-2">
            <option value="lastSeenDesc">最近在榜</option>
            <option value="peakRankAsc">最高排名</option>
            <option value="durationDesc">在榜时长</option>
            <option value="comebackDesc">回榜次数</option>
          </select>
        </div>
        <div id="libraryMeta" class="mb-2 text-sm text-slate-500"></div>
        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b text-left text-slate-500">
                <th class="py-2">标题</th>
                <th class="py-2">状态</th>
                <th class="py-2">首次上榜</th>
                <th class="py-2">最近在榜</th>
                <th class="py-2">最高排名</th>
                <th class="py-2">在榜时长</th>
                <th class="py-2">回榜次数</th>
                <th class="py-2">当前排名</th>
                <th class="py-2">操作</th>
              </tr>
            </thead>
            <tbody id="libraryTable"></tbody>
          </table>
        </div>
      </section>
    </main>
    <script src="./app.js?v=20260218-4"></script>
  </body>
</html>
